(this["webpackJsonpnova-weather-app"]=this["webpackJsonpnova-weather-app"]||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),s=a.n(r),c=a(21),o=a.n(c),i=a(2),u=a(3),l=a(5),p=a(4),h=a(9),d=a.n(h),v=a(11),f=a(12),j=(a(28),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).clockIntervalID=void 0,e.state=Object(f.a)({},e.getTime()),e}return Object(u.a)(a,[{key:"appendLeadingZero",value:function(e,t){return String(e).padStart(t,"0")}},{key:"getTime",value:function(){var e=new Date;return{hours:parseInt(this.appendLeadingZero(e.getHours(),2)),minutes:parseInt(this.appendLeadingZero(e.getMinutes(),2)),seconds:parseInt(this.appendLeadingZero(e.getSeconds(),2))}}},{key:"setTime",value:function(){this.setState(Object(f.a)({},this.getTime()))}},{key:"componentDidMount",value:function(){var e=this;this.setTime(),this.clockIntervalID=setInterval((function(){e.setTime()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.clockIntervalID)}},{key:"decoration",value:function(){return Object(n.jsxs)("div",{className:"clock__decor",children:[Object(n.jsx)("span",{className:"clock__decor-oval clock__decor-oval--light"}),Object(n.jsx)("span",{className:"clock__decor-oval clock__decor-oval--half"}),Object(n.jsx)("span",{className:"clock__decor-oval clock__decor-oval--full"})]})}},{key:"render",value:function(){var e=this.state,t=e.hours,a=e.minutes;return Object(n.jsx)("div",{className:"clock",children:Object(n.jsxs)("div",{className:"clock__panel",children:[this.decoration(),Object(n.jsxs)("span",{className:"clock__time",children:[t,":",a," GMT"]}),this.decoration()]})})}}]),a}(s.a.Component)),m=(a(29),function(){return Object(n.jsx)("div",{className:"location",children:"London"})}),b=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).countIntervalID=void 0,e.state={currentCount:0},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.targetCount,n=this.state.currentCount;a===n&&e!==this.props?(this.setState({currentCount:0}),this.setCountCheckInterval()):a===n&&clearInterval(this.countIntervalID)}},{key:"setCountCheckInterval",value:function(){var e=this;this.countIntervalID=setInterval((function(){var t=e.props.targetCount,a=e.state.currentCount;if(a<t){var n=a+1;e.setState({currentCount:n})}else if(a>t){var r=a-1;e.setState({currentCount:r})}}),100)}},{key:"componentDidMount",value:function(){this.setCountCheckInterval()}},{key:"render",value:function(){var e=this.state.currentCount;return Object(n.jsx)(s.a.Fragment,{children:e})}}]),a}(s.a.Component),g=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"shouldComponentUpdate",value:function(e){return this.props.apiRequestCount!==e.apiRequestCount}},{key:"render",value:function(){var e=this.props.temp;return Object(n.jsxs)("span",{className:"temperature",children:[Object(n.jsx)(b,{targetCount:e}),"\xb0"]})}}]),a}(s.a.Component),O=(a(30),function(e){var t=e.progress;return Object(n.jsx)("div",{className:"progress-bar",children:Object(n.jsx)("div",{className:"progress-bar__bar",children:Object(n.jsx)("div",{className:"progress-bar__progress",style:{width:"".concat(t,"%")}})})})}),y=(a(31),function(e){var t=e.refreshCount,a=e.pregressCount,r=e.temp,s=e.apiRequestCount;return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsxs)("div",{className:"header__top",children:[Object(n.jsx)("div",{className:"header__clock",children:Object(n.jsx)(j,{})}),Object(n.jsxs)("div",{className:"header__stats",children:[Object(n.jsx)(m,{}),Object(n.jsx)(g,{temp:r,apiRequestCount:s})]})]}),Object(n.jsxs)("div",{className:"header__section",children:[Object(n.jsxs)("span",{className:"font-size-small",style:{paddingLeft:"5px"},children:["Reloading in ",t,"s"]}),Object(n.jsx)(O,{progress:a})]})]})}),k=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.title;return""===t?"":Object(n.jsx)("img",{src:t,alt:a})}}]),a}(s.a.Component),C=(a(32),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"renderDayName",value:function(){var e=this.props.forecast.getDayName();return""===e?"":Object(n.jsx)("div",{className:"forecast-card__day h3-font-size text-uppercase",children:e})}},{key:"renderTemperature",value:function(){var e=this.props,t=e.forecast,a=e.apiRequestCount,r=t.getTemperatureRounded();return r&&a?Object(n.jsx)("div",{className:"forecast-card__temp h2-font-size text-uppercase",children:Object(n.jsx)(g,{temp:r,apiRequestCount:a})}):""}},{key:"renderWeatherIcon",value:function(){var e=this.props.forecast,t=e.getWeatherIconURL(),a=e.getWeatherDescription();return""===t||""===a?"":Object(n.jsx)("div",{className:"forecast-card__icon",children:Object(n.jsx)(k,{src:t,title:a})})}},{key:"renderWetherDescription",value:function(){var e=this.props.forecast.getWeatherDescription();return""===e?"":Object(n.jsx)("p",{className:"forecast-card__description h6-font-size text-uppercase",children:e})}},{key:"renderWeatherDetails",value:function(){var e=this.props.forecast,t=e.getWeatherIconURL(),a=e.getWeatherDescription();return""===t||""===a?"":Object(n.jsxs)("div",{className:"forecast-card__icon-wrapper",children:[this.renderWeatherIcon(),this.renderWetherDescription()]})}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"forecast-card",children:[this.renderDayName(),this.renderTemperature(),this.renderWeatherDetails()]})}}]),a}(s.a.Component)),x=(a(33),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"shouldComponentUpdate",value:function(e){return this.props.apiRequestCount!==e.apiRequestCount}},{key:"renderList",value:function(){var e=this.props,t=e.weatherForecast,a=e.apiRequestCount;return t.length?Object(n.jsx)("div",{className:"forecast-list",children:t.map((function(e){return Object(n.jsx)(C,{forecast:e,apiRequestCount:a},e.getDateTime())}))}):""}},{key:"render",value:function(){return this.renderList()}}]),a}(s.a.Component)),D=a(7),_=a.n(D);_.a.defaults.baseURL="https://api.openweathermap.org/data/2.5",_.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log(e),Promise.reject(e)}));var I={get:_.a.get,post:_.a.post,put:_.a.put,delete:_.a.delete};function w(e){var t={params:{q:"London,UK",units:"metric",APPID:"f5611446f6407625ae0f72bf6c131cbc"}};return I.get(e,t)}var N=a(8),R=a.n(N),T=function(){function e(t){Object(i.a)(this,e),this.data=void 0,this.data=t}return Object(u.a)(e,[{key:"getTemperatureData",value:function(){return this.data.main}},{key:"getWeatherData",value:function(){return this.data.weather[0]}},{key:"getTemperature",value:function(){return this.getTemperatureData().temp}},{key:"getTemperatureRounded",value:function(){return Math.round(this.getTemperature())}},{key:"getDateTime",value:function(){return this.data.dt}},{key:"getDayName",value:function(){var e=this.getDateTime();return R()(1e3*e).format("ddd")}},{key:"getWeatherIconName",value:function(){return this.getWeatherData().icon}},{key:"getWeatherIconURL",value:function(){var e=this.getWeatherIconName();return"https://openweathermap.org/img/wn/".concat(e,".png")}},{key:"getWeatherDescription",value:function(){return this.getWeatherData().description}}]),e}(),W=function(){function e(t){Object(i.a)(this,e),this.data=void 0,this.data=this.getForecastData(t)}return Object(u.a)(e,[{key:"getForecastData",value:function(e){return e.data}},{key:"getForecastList",value:function(){return this.data.hasOwnProperty("list")?this.data.list:[]}},{key:"getFiveDayForecastData",value:function(){var e=this.getForecastList(),t=[],a=0,n=0,r=R()().add(n,"day").endOf("day").unix();return e.forEach((function(e){if(!(n+1>=5)){var s=new T(e),c=s.getDateTime(),o=s.getTemperature();if(c>r&&(n++,r=R()().add(n,"day").endOf("day").unix()),t[n])return o>a?(a=o,void(t[n]=s)):void 0;t[n]=s}})),t}}]),e}(),F=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,null,[{key:"getWeatherData",value:function(e){return e.data}}]),e}(),q=(a(52),parseInt("10")),L=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).weatherAppIntervalID=0,e.state={apiRequestCount:0,weatherForecastData:[],refreshCount:q,pregressCount:0,currentTemp:0},e}return Object(u.a)(a,[{key:"updateWeatherData",value:function(){var e=Object(v.a)(d.a.mark((function e(){var t,a,n,r,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("weather");case 2:return t=e.sent,e.next=5,w("forecast");case 5:a=e.sent,n=F.getWeatherData(t),r=new T(n),s=new W(a),c=this.state.apiRequestCount,this.setState({apiRequestCount:c+1,currentTemp:r.getTemperatureRounded(),weatherForecastData:s.getFiveDayForecastData(),refreshCount:q,pregressCount:0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setReloadingCountDown",value:function(){var e=this.state.refreshCount;if(e>0){var t=e-1;this.setState({refreshCount:t})}else this.setState({refreshCount:q})}},{key:"calculateProgress",value:function(){var e=this.state,t=e.pregressCount;if(0!==e.apiRequestCount){var a=t+1/q;a>100&&(a=0),this.setState({pregressCount:a})}}},{key:"componentWillUnmount",value:function(){clearInterval(this.weatherAppIntervalID)}},{key:"componentDidMount",value:function(){var e=Object(v.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateWeatherData(),t=1,setInterval((function(){t%(100*q)===0?a.updateWeatherData():t%100===0?(a.setReloadingCountDown(),a.calculateProgress()):t%1===0&&a.calculateProgress(),t++}),10);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.currentTemp,a=e.pregressCount,r=e.refreshCount,c=e.weatherForecastData,o=e.apiRequestCount;return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(y,{temp:t,pregressCount:a,refreshCount:r,apiRequestCount:o}),Object(n.jsx)("main",{children:Object(n.jsx)(x,{weatherForecast:c,apiRequestCount:o})})]})}}]),a}(s.a.Component),S=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"app",children:Object(n.jsx)(L,{})})}}]),a}(r.Component),U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,56)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};a(53),a(54);o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),U()}},[[55,1,2]]]);
//# sourceMappingURL=main.48e72f7e.chunk.js.map